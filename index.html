<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†Ø¸Ø§Ù… Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø§Ù„Ø·Ø§Ù„Ø¨</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
body { font-family: 'Cairo', sans-serif; direction: rtl; margin:0; padding:0; background: linear-gradient(to bottom,#e0f0ff,#ffffff);}
header { background:#007bff; color:#fff; text-align:center; padding:25px 10px; font-size:24px; font-weight:bold;}
header span { display:block; font-size:16px; font-weight:normal; margin-top:5px; opacity:0.8;}
.input-group { display:flex; justify-content:center; flex-wrap:wrap; gap:10px; margin:20px 0;}
.input-group input { flex:0 0 160px; padding:10px; font-size:14px; border-radius:8px; border:1px solid #ccc;}
.input-group input:focus { outline:none; border-color:#007bff; box-shadow:0 0 8px rgba(0,123,255,0.3);}
button { padding:10px 25px; font-size:14px; border:none; border-radius:8px; background:#28a745; color:#fff; cursor:pointer;}
button:hover { background:#218838; transform:scale(1.05);}
.year-label { text-align:center; font-size:14px; color:#555; margin-bottom:20px; opacity:0.8;}
.container { max-width:1200px; margin:0 auto 30px auto; padding:10px; display:grid; grid-template-columns:repeat(auto-fit,minmax(320px,1fr)); gap:20px; justify-items:center;}
.section { width:100%; min-height:300px; background:#fff; border-radius:15px; padding:15px; box-shadow:0 10px 30px rgba(0,0,0,0.15); font-family:'Cairo',sans-serif; font-size:14px; overflow-x:auto;}
.section h3 { text-align:center; color:#fff; font-size:18px; border-radius:10px; padding:10px 0; margin-bottom:15px;}
.grades { background:#ffc107; color:#000; font-size:13px; }
table { width:100%; border-collapse:collapse; table-layout:fixed;}
th, td { padding:6px 4px; text-align:center; border:1px solid #ddd; word-wrap:break-word;}
tr:hover { background-color: rgba(0,123,255,0.1);}
.governance { margin-top:20px; background:#343a40; color:#fff; padding:20px; border-radius:15px; text-align:center;}
.version { text-align:center; margin-top:10px; font-size:12px; color:#555;}
@media (max-width:768px) { .input-group input { flex:0 0 140px; } th, td { font-size:12px; padding:4px;} .container { grid-template-columns:1fr; } .section { min-height:auto; } }
</style>
</head>
<body>

<header>
ğŸ“ Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ù‡Ù„ÙŠØ©
<span>Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ 2025-2026</span>
</header>

<div class="input-group">
<input id="parentNumber" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±">
<input id="studentCode" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ø·Ø§Ù„Ø¨">
<button onclick="searchStudent()">Ø¨Ø­Ø«</button>
</div>

<div class="year-label">Ø§Ù„Ø¹Ø§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ 2025-2026</div>
<div class="container" id="output"></div>
<div class="version">Ø§Ù„Ø¥ØµØ¯Ø§Ø± V0.1.2</div>
<div class="governance">
Ù‚Ø³Ù… Ø§Ù„Ø­ÙˆÙƒÙ…Ø©: Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ù‡Ù„ÙŠØ©
</div>

<script>
async function searchStudent(saveToStorage=true){
  const code = document.getElementById("studentCode").value.trim();
  const parent = document.getElementById("parentNumber").value.trim();
  const output = document.getElementById("output");
  if(!parent || !code){
    output.innerHTML = "<p style='color:#dc3545; text-align:center;'>âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± ÙˆÙƒÙˆØ¯ Ø§Ù„Ø·Ø§Ù„Ø¨ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬.</p>";
    return;
  }

  if(saveToStorage){
    localStorage.setItem("studentCode", code);
    localStorage.setItem("parentNumber", parent);
  }

  output.innerHTML = "<p style='text-align:center;'>â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...</p>";

  const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vReghaYoMk3f8ffSBLRHIwZieEWCfk5Yx8W6c843TXkC6wpA78Z0X5nw21RRpxMdQ/pub?gid=1229272896&single=true&output=csv";

  try {
    const resp = await fetch(sheetURL);
    const text = await resp.text();
    const rows = text.split("\n").map(r=>r.split(","));
    const header = rows[0].map(h=>h.trim());
    const dataRows = rows.slice(1);
    const students = dataRows.map(r=>{
      const obj={};
      for(let i=0;i<header.length;i++) obj[header[i]]=(r[i]||"").trim();
      return obj;
    });

    const student = students.find(s => s["ÙƒÙˆØ¯ Ø§Ù„Ø·Ø§Ù„Ø¨"]===code && s["Ø±Ù‚Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø§Ù…Ø±"]===parent);
    if(!student){ output.innerHTML="<p style='color:#dc3545; text-align:center;'>âŒ Ù„Ù… Ø£Ø¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨Ø­Ø«.</p>"; return; }

    let html = "";

    // Ø§Ù„Ù…ÙˆØ§Ø¯ ÙˆØ§Ù„ÙØªØ±Ø§Øª (10 Ø£Ø¹Ù…Ø¯Ø© Ù„ÙƒÙ„ Ù…Ø§Ø¯Ø©)
    const subjects = {
      "Ø§Ù„Ø§Ø³Ù„Ø§Ù…ÙŠØ©": ["AC","AD","AE","AF","AG","AH","AI","AJ","AK","AL"],
      "Ø¹Ø±Ø¨ÙŠ": ["AM","AN","AO","AP","AQ","AR","AS","AT","AU","AV"],
      "Ø§Ù„Ø§Ù†ÙƒÙ„ÙŠØ²ÙŠ": ["AW","AX","AY","AZ","BA","BB","BC","BD","BE","BF"],
      "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª": ["BG","BH","BI","BJ","BK","BL","BM","BN","BO","BP"],
      "Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡": ["BQ","BR","BS","BT","BU","BV","BW","BX","BY","BZ"],
      "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡": ["CA","CB","CC","CD","CE","CF","CG","CH","CI","CJ"],
      "Ø§Ù„Ø§Ø­ÙŠØ§Ø¡": ["CK","CL","CM","CN","CO","CP","CQ","CR","CS","CT"],
      "Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª": ["CU","CV","CW","CX","CY","CZ","DA","DB","DC","DD"],
      "Ø­Ø§Ø³ÙˆØ¨": ["DE","DF","DG","DH","DI","DJ","DK","DL","DM","DN"],
      "Ø±ÙŠØ§Ø¶Ø©": ["DO","DP","DQ","DR","DS","DT","DU","DV","DW","DX"],
      "ÙÙ†ÙŠØ©": ["DY","DZ","EA","EB","EC","ED","EE","EF","EG","EH"],
      "Ø§Ù„Ø³Ù„ÙˆÙƒ": ["EI","EJ","EK","EL","EM","EN","EO","EP","EQ","ER"]
    };

    for(const subject in subjects){
      html += `<div class="section grades"><h3>${subject}</h3><table><tr>`;
      // Ø±Ø¤ÙˆØ³ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©: Ø§Ù„ÙØªØ±Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
      subjects[subject].forEach(col=>{
        html += `<th>${header[header.indexOf(col)]||col}</th>`;
      });
      html += "</tr><tr>";
      // Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨
      subjects[subject].forEach(col=>{
        html += `<td>${student[col]||""}</td>`;
      });
      html += "</tr></table></div>";
    }

    output.innerHTML = html;

  } catch(err){
    console.error(err);
    output.innerHTML = "<p style='color:#dc3545; text-align:center;'>âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</p>";
  }
}

// Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¥Ø¹Ø§Ø¯Ø© ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹
window.addEventListener("DOMContentLoaded", ()=>{
  const savedCode = localStorage.getItem("studentCode");
  const savedParent = localStorage.getItem("parentNumber");
  if(savedCode && savedParent){
    document.getElementById("studentCode").value = savedCode;
    document.getElementById("parentNumber").value = savedParent;
    searchStudent(false);
  }
});
</script>
</body>
</html>
